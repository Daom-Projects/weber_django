[project]
name = "weber-django"
version = "0.1.0"
description = "Proyecto de ejemplo para aprender a usar Django"
readme = "README.md"
requires-python = ">=3.13"
license = { file = "LICENSE.txt" }
keywords = ["django", "web", "weber", "inventarios"]
authors = [{ name = "Diego Alonso Ojeda Medina", email = "daom89@gmail.com" }]
dependencies = [
    "django>=5.2.4",
    "django-cors-headers>=4.7.0",
    "django-environ>=0.12.0",
    "django-import-export[all]>=4.3.9",
    "django-safedelete>=1.4.1",
    "django-vite>=3.1.0",
    "djangorestframework>=3.16.0",
]

[project.urls]
Repository = "https://github.com/Daom-Projects/weber_django.git"
Issues = "https://github.com/Daom-Projects/weber_django/issues"

[project.scripts]
my-command = "my_package.cli:main"

[dependency-groups]
dev = ["taskipy>=1.14.1"]

[tool.taskipy.tasks]
# ğŸ§‘â€ğŸ’» Superusuario
createsuperuser = { cmd = "python manage.py createsuperuser", help = "Crea un superusuario administrador" }

# ğŸ—ï¸ Migraciones
makemigrations = { cmd = "python manage.py makemigrations", help = "Genera migraciones segÃºn los cambios en los modelos" }
migrate = { cmd = "python manage.py migrate", help = "Aplica migraciones al esquema de base de datos" }

# ğŸ“¦ Cargar y exportar datos
fixtures-load = { cmd = "python manage.py loadall", help = "Carga datos de prueba desde fixtures definidos" }
fixtures-export = { cmd = "python manage.py exportall", help = "Exporta datos actuales a archivos fixtures" }

# ğŸ†• Crear nueva app
newapp = { cmd = "python manage.py startapp", help = "Crear una nueva app Django" }

# ğŸ“‚ Crear proyecto Django
newproject = { cmd = "django-admin startproject", help = "Crear un nuevo proyecto Django" }

# ğŸ—‘ï¸ Limpiar base de datos
cleandb = { cmd = "python manage.py flush --no-input", help = "Elimina todos los datos de la base de datos" }

# ğŸŒ Servidor de desarrollo
runserver = { cmd = "python manage.py runserver", help = "Inicia el servidor Django en modo desarrollo" }

# ğŸ” Recarga completa de base de datos
dbreload = { cmd = "task makemigrations && task migrate && task fixtures-load", help = "Reconstruye la base de datos y carga fixtures" }

# ğŸ§ª Tests
test = { cmd = "pytest", help = "Ejecuta pruebas automÃ¡ticas con pytest" }

# ğŸ§¹ Linter y estilo
lint = { cmd = "ruff check .", help = "Revisa el estilo y calidad del cÃ³digo con Ruff" }
format = { cmd = "black .", help = "Formatea el cÃ³digo usando Black" }

# ğŸš€ Hooks de prueba
pre_test = { cmd = "task lint", help = "Revisa estilo antes de correr tests" }
post_test = { cmd = "task format", help = "Formatea el cÃ³digo despuÃ©s de las pruebas" }

# ğŸ“¦ InstalaciÃ³n de dependencias
install = { cmd = "pip install -e .", help = "Instala las dependencias del proyecto" }
# ğŸ“¦ DesinstalaciÃ³n de dependencias
uninstall = { cmd = "pip uninstall -r requirements.txt", help = "Desinstala las dependencias del proyecto" }
# ğŸ“¦ ActualizaciÃ³n de dependencias
update = { cmd = "pip install --upgrade -r requirements.txt", help = "Actualiza las dependencias del proyecto" }

# ğŸ“¦ GeneraciÃ³n de requirements.txt
requirements = { cmd = "pip freeze > requirements.txt", help = "Genera el archivo requirements.txt con las dependencias actuales" }

# ğŸ“‚ Recopilar archivos estÃ¡ticos
collectstatic = { cmd = "python manage.py collectstatic --noinput", help = "Recopila archivos estÃ¡ticos" }

# ğŸ—‘ï¸ Eliminar archivos estÃ¡ticos
cleanstatic = { cmd = "rm -rf staticfiles", help = "Elimina los archivos estÃ¡ticos recopilados" }
